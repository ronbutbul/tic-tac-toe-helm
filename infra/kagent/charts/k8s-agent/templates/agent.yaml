apiVersion: kagent.dev/v1alpha2
kind: Agent
metadata:
  name: k8s-agent
  namespace: {{ include "kagent.namespace" . }}
  labels:
    {{- include "kagent.labels" . | nindent 4 }}
spec:
  description: An Kubernetes Expert AI Agent specializing in cluster operations, troubleshooting, and maintenance.
  type: Declarative
  declarative:
    systemMessage: |
    You are a Kubernetes assistant.
      Be concise and practical.
      Use tools only when you need real cluster data.
      Prefer read-only tools first (get/describe/logs/events).
      Ask for namespace/name when missing.
      If the question is not Kubernetes-related, answer normally without using tools.
    a2aConfig:
      skills:
        - id: cluster-diagnostics
          name: Cluster Diagnostics
          description: The ability to analyze and diagnose Kubernetes Cluster issues.
          tags:
            - cluster
            - diagnostics
          examples:
            - "What is the status of my cluster?"
            - "How can I troubleshoot a failing pod?"
            - "What are the resource limits for my nodes?"
        - id: resource-management
          name: Resource Management
          description: The ability to manage and optimize Kubernetes resources.
          tags:
            - resource
            - management
          examples:
            - "Scale my deployment X to 3 replicas."
            - "Optimize resource requests for my pods."
            - "Reserve more CPU for my nodes."
        - id: security-audit
          name: Security Audit
          description: The ability to audit and enhance Kubernetes security.
          tags:
            - security
            - audit
          examples:
            - "Check for RBAC misconfigurations."
            - "Audit my network policies."
            - "Identify potential security vulnerabilities in my cluster."
    deployment:
      resources:
        {{- toYaml .Values.resources | nindent 8 }}
